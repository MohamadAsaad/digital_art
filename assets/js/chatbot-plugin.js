// ุชุญุฏูุฏ ูุบุฉ ุงูุตูุญุฉ ุชููุงุฆูุงู
const pageLang = document.documentElement.lang || 'ar';

// ููุงุนุฏ ุงูุฑูุจูุช ูุน ูููุงุช ุฑุฆูุณูุฉ ูุฑุฏูุฏ
const rules = [
    // === ุงููุณู 1: ุงูุชุฑุญูุจ ูุงูุชุญูุฉ ===
    {
        keywords: pageLang === "ar" ? ["ูุฑุญุจูุง", "ููู ุงูุญุงู", "ูููู", "ูุฑุญุจุง", "ุงููุง", "ุงููุงู"] : ["hello", "hi", "hey"],
        response: pageLang === "ar" ? "ูุฑุญุจูุง ุจู ูู Digital Art! ููู ูููููู ูุณุงุนุฏุชู ุงููููุ" : "Welcome to Digital Art! How can I assist you today?"
    },
    {
        keywords: pageLang === "ar" ? ["ุงูุณูุงู ุนูููู", "ุงูุณูุงู", "ุณูุงู", "ุณูุงู ุนูููู", "ุงูุณูุงู ุนูููู ูุฑุญูุฉ ุงููู"] : ["salam", "alsalam", "peace"],
        response: pageLang === "ar" ? "ูุนูููู ุงูุณูุงู ูุฑุญูุฉ ุงููู ูุจุฑูุงุชู! ุฃูููุง ุจู ูู Digital Art. ููู ูููููู ูุณุงุนุฏุชู ุงููููุ" : "Peace be upon you! Welcome to Digital Art. How can I assist you today?"
    },

    // === ุงููุณู 2: ุชุนุฑูู ุจุงูุดุฑูุฉ ===
    {
        keywords: pageLang === "ar" ? ["ูู ุฃูุช", "ูู ุงูุชู", "ูู ุงูุช", "ูุง ุงุณูู", "ุชุนุฑูู", "ูุง ูู Digital Art", "ุนู ุงูุดุฑูุฉ", "ูุจุฐุฉ ุนููู"] : ["who are you", "who are you guys", "what's your name", "about digital art", "about your company", "tell me about you"],
        response: pageLang === "ar" ?
            "ุฃูุง ุฑูุจูุช ุฏุฑุฏุดุฉ ุชุงุจุน ูุดุฑูุฉ Digital Art. ูุญู ูุชุฎุตุตูู ูู ุชุตููู ูุชุทููุฑ ุงูููุงูุน ุงูุฅููุชุฑูููุฉ ูุงูุชุณููู ุงูุฑููู ุจุฎุจุฑุฉ ุชุฒูุฏ ุนู 5 ุณููุงุช. ูุณุนุฏ ุจุฎุฏูุชู!" :
            "I am a chatbot from Digital Art. We specialize in web design, development, and digital marketing with over 5 years of experience. We're happy to assist you!"
    },
    {
        keywords: pageLang === "ar" ? ["ูุฑูู ุงูุนูู", "ุงููุจุฑูุฌูู", "ุงููุตูููู", "ุฎุจุฑุชูู", "ุนุฏุฏ ุงูููุธููู"] : ["your team", "developers", "designers", "your experience", "number of employees"],
        response: pageLang === "ar" ?
            "ูุฑูููุง ูุชููู ูู 10 ูุตูููู ููุจุฑูุฌูู ููุณูููู ูุญุชุฑููู ุจุฎุจุฑุฉ ุชุฒูุฏ ุนู 5 ุณููุงุช ูู ุงููุฌุงู. ูุฏููุง ุฃูุซุฑ ูู 100 ูุดุฑูุน ูุงุฌุญ." :
            "Our team consists of 10 professional designers, developers and marketers with 5+ years of experience. We've completed 100+ successful projects."
    },

    // === ุงููุณู 3: ุงูุฎุฏูุงุช ุงูุฑุฆูุณูุฉ ===
    {
        keywords: pageLang === "ar" ? ["ุฎุฏูุงุช", "ูุงุฐุง ุชูุฏููู", "ุนุฑูุถ", "ุฎุฏูุงุชูู"] : ["services", "what do you offer", "offers", "your services"],
        response: pageLang === "ar" ?
            "ููุฏู ุฎุฏูุงุช ูุชูุงููุฉ ุชุดูู:\n- ุชุตููู ูุชุทููุฑ ุงูููุงูุน ุงูุฅููุชุฑูููุฉ\n- ุชุทุจููุงุช ุงูุฌูุงู\n- ุงูุชุณููู ุงูุฑููู (SEOุ ุฅุนูุงูุงุช)\n- ุฅุฏุงุฑุฉ ุงูุญููุงุช ุงูุฅุนูุงููุฉ\n- ุงุณุชุถุงูุฉ ุงูููุงูุน\nุฃู ูู ูุฐู ุงูุฎุฏูุงุช ุชูููุ" :
            "We offer comprehensive services including:\n- Web design & development\n- Mobile applications\n- Digital marketing (SEO, ads)\n- Ad campaigns management\n- Web hosting\nWhich of these interests you?"
    },
    {
        keywords: pageLang === "ar" ? ["ุชุตููู ุงูููุงูุน", "ููุจ", "ูููุน ููุจ", "ููุงูุน ุงูููุจ", "ูููุน ุฅููุชุฑููู", "ูููุน ุดุฑูุฉ"] : ["web design", "website", "websites", "company website"],
        response: pageLang === "ar" ?
            "ูููู ุจุชุตููู ููุงูุน ุงุญุชุฑุงููุฉ ุจุชูููุงุช ุญุฏูุซุฉ ุชุถูู:\n- ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฑุงุฆุนุฉ\n- ุงุณุชุฌุงุจุฉ ุนูู ุฌููุน ุงูุฃุฌูุฒุฉ\n- ุณุฑุนุฉ ุนุงููุฉ\n- ุฃูุงู ูุชูุงูู\nูู ูุฏูู ููุฑุฉ ูุญุฏุฏุฉ ุนู ูููุนูุ" :
            "We create professional websites with modern technologies ensuring:\n- Great user experience\n- Full responsiveness\n- High speed\n- Complete security\nDo you have a specific idea for your site?"
    },
    {
        keywords: pageLang === "ar" ? ["ูุชุฌุฑ ุฅููุชุฑููู", "ecommerce", "ูุชุฌุฑ ุนูู ุงูุฅูุชุฑูุช", "ูููุน ุจูุน", "ูููุน ุชุณูู"] : ["ecommerce", "online store", "shop website", "selling online", "shopping site"],
        response: pageLang === "ar" ?
            "ูุตูู ูุชุงุฌุฑ ุฅููุชุฑูููุฉ ูุชูุงููุฉ ูุน:\n- ุฃูุธูุฉ ุงูุฏูุน ุงูุฅููุชุฑููู\n- ุฅุฏุงุฑุฉ ุงููุฎุฒูู\n- ุดูุงุฏุงุช ุฃูุงู SSL\n- ุชูุงูู ูุน ุดุฑูุงุช ุงูุดุญู\nูู ูุฏูู ููุชุฌุงุช ูุญุฏุฏุฉ ุชุฑูุฏ ุจูุนูุงุ" :
            "We build complete e-stores with:\n- Online payment systems\n- Inventory management\n- SSL certificates\n- Shipping companies integration\nDo you have specific products to sell?"
    },
    {
        keywords: pageLang === "ar" ? ["ุชุทููุฑ ุงูููุงูุน", "ุจุฑูุฌุฉ", "ุชุทููุฑ", "ุจุฑูุฌุฉ ููุงูุน"] : ["web development", "programming", "development", "website coding"],
        response: pageLang === "ar" ?
            "ูุทูุฑ ุญููู ูุฎุตุตุฉ ุจุงุณุชุฎุฏุงู ุฃุญุฏุซ ุงูุชูููุงุช ูุซู:\n- HTML5, CSS3, JavaScript\n- PHP, Python, Node.js\n- WordPress, Laravel\nูุง ูู ุงูุชูููุฉ ุงูุชู ุชูุถููุงุ" :
            "We develop custom solutions using latest technologies like:\n- HTML5, CSS3, JavaScript\n- PHP, Python, Node.js\n- WordPress, Laravel\nWhich technology do you prefer?"
    },

    // === ุงููุณู 4: ุงูุชุณููู ุงูุฑููู ===
    {
        keywords: pageLang === "ar" ? ["ุงูุชุณููู ุงูุฑููู", "ุงุนูุงูุงุช", "ุฅุนูุงูุงุช", "ุชุณููู", "ุชุณููู ุงููุชุฑููู"] : ["digital marketing", "ads", "advertising", "marketing", "online marketing"],
        response: pageLang === "ar" ?
            "ูููุฑ ุฎุฏูุงุช ุชุณููููุฉ ุดุงููุฉ:\n1. ุชุญุณูู ูุญุฑูุงุช ุงูุจุญุซ (SEO)\n2. ุฅุนูุงูุงุช ุฌูุฌู\n3. ุญููุงุช ูุณุงุฆู ุงูุชูุงุตู\n4. ุงูุชุณููู ุจุงููุญุชูู\nูุง ูู ุฎุฏูุฉ ุงูุชุณููู ุงูุชู ุชุญุชุงุฌูุงุ" :
            "We offer comprehensive marketing services:\n1. Search Engine Optimization (SEO)\n2. Google Ads\n3. Social Media Campaigns\n4. Content Marketing\nWhich marketing service do you need?"
    },
    {
        keywords: pageLang === "ar" ? ["ุฒูุงุฏุฉ ุฒูุงุฑ", "ุชุฑุชูุจ ุฌูุฌู", "ุธููุฑ ูู ุงูุจุญุซ", "ุฒูุงุฏุฉ ุนููุงุก", "ุนููุงุก ุฌุฏุฏ"] : ["more traffic", "Google ranking", "search visibility", "get more customers", "new clients"],
        response: pageLang === "ar" ?
            "ูุฒูุงุฏุฉ ุฒูุงุฑ ูููุนู ููุฏู:\n- ุชุญุณูู SEO ูุธููุฑ ุฃูุถู ูู ุงูุจุญุซ\n- ุฅุนูุงูุงุช ูุฏููุนุฉ ูุณุชูุฏูุฉ\n- ูุญุชูู ุชุณูููู ุฌุฐุงุจ\nูู ูุฏูู ูููุน ุญุงูู ุชุฑูุฏ ุชุญุณูููุ" :
            "To increase your website traffic we offer:\n- SEO optimization for better search visibility\n- Targeted paid ads\n- Attractive marketing content\nDo you have an existing website to optimize?"
    },
    {
        keywords: pageLang === "ar" ? ["ุฅุนูุงูุงุช ููุณุจูู", "ุฅุนูุงูุงุช ุงูุณุชุฌุฑุงู", "ุฅุนูุงูุงุช ุณูุดูุงู ููุฏูุง", "ุฅุนูุงูุงุช ุชูุงุตู ุงุฌุชูุงุนู"] : ["Facebook ads", "Instagram ads", "social media ads", "social network ads"],
        response: pageLang === "ar" ?
            "ุญููุงุชูุง ุงูุฅุนูุงููุฉ ุนูู ุงูุณูุดูุงู ููุฏูุง ุชุดูู:\n- ุชุญุฏูุฏ ุงูุฌูููุฑ ุงููุณุชูุฏู ุจุฏูุฉ\n- ุชุตููู ุฅุนูุงูุงุช ุฌุฐุงุจุฉ\n- ุชุญููู ุงููุชุงุฆุฌ ูุชุญุณูู ุงูุฃุฏุงุก\nูุง ูู ุงููุฆุฉ ุงููุณุชูุฏูุฉ ุงูุชู ุชุฑูุฏ ุงููุตูู ุฅูููุงุ" :
            "Our social media ad campaigns include:\n- Precise audience targeting\n- Attractive ad designs\n- Results analysis and optimization\nWhat's your target demographic?"
    },

    // === ุงููุณู 5: ุงูุฏุนู ุงูููู ูุงูุตูุงูุฉ ===
    {
        keywords: pageLang === "ar" ? ["ุฏุนู ููู", "ุตูุงูุฉ", "ูุดุงูู ุชูููุฉ", "ุชุญุฏูุซ", "ุฏุนู", "ูุณุงุนุฏุฉ ูููุฉ"] : ["technical support", "maintenance", "technical issues", "updates", "support", "tech help"],
        response: pageLang === "ar" ?
            "ููุฏู ุญุฒู ุตูุงูุฉ ุดุงููุฉ ุชุดูู:\n- ุฏุนู ููู 24/7\n- ุชุญุฏูุซุงุช ุฏูุฑูุฉ\n- ูุณุฎ ุงุญุชูุงุทู ูููู\n- ูุฑุงูุจุฉ ุฃุฏุงุก ุงููููุน\nูู ุชูุงุฌู ูุดููุฉ ูุญุฏุฏุฉ ุชุญุชุงุฌ ูุณุงุนุฏุฉ ูููุงุ" :
            "We offer comprehensive maintenance packages including:\n- 24/7 technical support\n- Regular updates\n- Daily backups\n- Performance monitoring\nAre you facing a specific issue?"
    },
    {
        keywords: pageLang === "ar" ? ["ูุดููุฉ ูู ุงููููุน", "ุงููููุน ูุง ูุนูู", "ุฎุทุฃ", "ุนุทู", "ุชุตููุญ ูููุน", "ุฅุตูุงุญ"] : ["website problem", "site not working", "error", "fix", "broken website", "website issue"],
        response: pageLang === "ar" ?
            "ูุญู ุงููุดููุงุช ุงููููุฉ ูุฑุฌู:\n1. ูุตู ุงููุดููุฉ ุจุงูุชูุตูู\n2. ุฐูุฑ ูุชู ุจุฏุฃุช ุงููุดููุฉ\n3. ุฅุฑุณุงู ููุทุฉ ุดุงุดุฉ ุฅู ุฃููู\nุณูุณุงุนุฏู ูู ุญููุง ุจุฃุณุฑุน ููุช!" :
            "For technical issues please:\n1. Describe the problem in detail\n2. Mention when it started\n3. Send screenshot if possible\nWe'll help resolve it quickly!"
    },
    {
        keywords: pageLang === "ar" ? ["ุงุฎุชุฑุงู", "ูููุน ูุนุทู", "ุญุงูุฉ ุทุงุฑุฆุฉ", "ูุดููุฉ ุนุงุฌูุฉ", "ูุงู"] : ["hacked", "site down", "emergency", "urgent issue", "hack"],
        response: pageLang === "ar" ?
            "๐จ ูุญุงูุงุช ุงูุทูุงุฑุฆ ุงูููุฑูุฉ:\n- ุงุชุตู ุจุงูุฏุนู ุงูููุฑู ุนูู: 00905398847282 (24/7)\n- ุฃู ุฃุฑุณู ุฑุณุงูุฉ ุนุงุฌูุฉ ุนูู ุงููุงุชุณุงุจ\nุณูุนุงูุฌ ุงููุดููุฉ ููุฑุงู!" :
            "๐จ For urgent technical emergencies:\n- Call immediate support: 00905398847282 (24/7)\n- Or send WhatsApp message\nWe'll fix it immediately!"
    },

    // === ุงููุณู 6: ุงูุฃุณุนุงุฑ ูุงูุฏูุน ===
    {
        keywords: pageLang === "ar" ? ["ุชูููุฉ", "ุงุณุนุงุฑ", "ุฃุณุนุงุฑ", "ูู", "ุงูุณุนุฑ", "ุงูุชูููุฉ"] : ["pricing", "how much", "cost", "price", "what's the cost"],
        response: pageLang === "ar" ?
            "ุฃุณุนุงุฑูุง ุชุฎุชูู ุญุณุจ ุงูุฎุฏูุฉ:\n- ุชุตููู ูููุน: ูุจุฏุฃ ูู 500$\n- ูุชุฌุฑ ุฅููุชุฑููู: ูุจุฏุฃ ูู 1000$\n- ุงูุชุณููู: ูุจุฏุฃ ูู 300$/ุดูุฑ\nูู ุชุฑูุฏ ุนุฑุถ ุณุนุฑ ููุตู ููุดุฑูุนูุ" :
            "Our prices vary by service:\n- Website design: starts from $500\n- E-commerce: starts from $1000\n- Marketing: starts from $300/month\nWould you like a detailed quote?"
    },
    {
        keywords: pageLang === "ar" ? ["ุฎุตู", "ุนุฑุถ ุชุฑููุฌู", "ุชุฎููุถ", "ุนุฑูุถ ุฎุงุตุฉ"] : ["discount", "promotion", "offer", "special deals"],
        response: pageLang === "ar" ?
            "ุญุงููุงู ูุฏููุง ุนุฑุถ ุฎุงุต ุนูู ุญุฒู ุงูุชุณููู ุงูุดุงููุฉ ุจุฎุตู 20% ููุนููุงุก ุงูุฌุฏุฏ. ูู ุชุฑูุฏ ุชูุงุตูู ุฃูุซุฑ ุนู ุงูุนุฑูุถ ุงูุญุงููุฉุ" :
            "We currently have a special 20% discount on complete marketing packages for new clients. Would you like more details about current offers?"
    },
    {
        keywords: pageLang === "ar" ? ["ุทุฑู ุงูุฏูุน", "ุงูุฏูุน ุงูุฅููุชุฑููู", "ุงูุฏูุน ุนูุฏ ุงูุชุณููู", "ุงูุฏูุน ุจุงูุชูุณูุท"] : ["payment methods", "online payment", "cash on delivery", "installments"],
        response: pageLang === "ar" ?
            "ุทุฑู ุงูุฏูุน ุงููุชุงุญุฉ:\n- ุชุญููู ุจููู\n- ุจุทุงูุงุช ุงุฆุชูุงู\n- PayPal\n- ุชูุณูุท ุนูู 3 ุฏูุนุงุช\nูุง ูู ุงูุทุฑููุฉ ุงูููุงุณุจุฉ ููุ" :
            "Available payment methods:\n- Bank transfer\n- Credit cards\n- PayPal\n- 3 installment payments\nWhich method suits you?"
    },

    // === ุงููุณู 7: ุงูุชูููุช ูุงูุชุณููู ===
    {
        keywords: pageLang === "ar" ? ["ูุชู", "ุงูุชุณููู", "ูุฏุฉ", "ุงูููุช", "ูู ูุณุชุบุฑู"] : ["delivery", "when", "timeframe", "time", "how long"],
        response: pageLang === "ar" ?
            "ูุฏุฉ ุงูุชุณููู ุงูุชูุฑูุจูุฉ:\n- ูููุน ุจุณูุท: 1-2 ุฃุณุจูุน\n- ูุชุฌุฑ ุฅููุชุฑููู: 3-4 ุฃุณุงุจูุน\n- ุชุทุจูู ููุจ: 4-6 ุฃุณุงุจูุน\nูู ูุฏูู ููุนุฏ ููุงุฆู ูุญุฏุฏ ุชุญุชุงุฌ ุงูุชุณููู ูุจููุ" :
            "Estimated delivery time:\n- Basic website: 1-2 weeks\n- E-commerce: 3-4 weeks\n- Web app: 4-6 weeks\nDo you have a specific deadline?"
    },
    {
        keywords: pageLang === "ar" ? ["ุชุณููู ุฌุฒุฆู", "ูุฑุงุญู ุงููุดุฑูุน", "ุฎุทูุงุช ุงูุนูู"] : ["partial delivery", "project phases", "work stages"],
        response: pageLang === "ar" ?
            "ูุนูู ุนูู ูุดุงุฑูุนูุง ุจูุฑุงุญู ูุงุถุญุฉ:\n1. ุงูุชุตููู ุงูุฃููู\n2. ุงูุชุทููุฑ ุงูุฃุณุงุณู\n3. ุงูุงุฎุชุจุงุฑุงุช\n4. ุงูุชุณููู ุงูููุงุฆู\nูู ุชุฑูุฏ ุดุฑุญุงู ููุตูุงู ููู ูุฑุญูุฉุ" :
            "We work in clear project phases:\n1. Initial design\n2. Core development\n3. Testing\n4. Final delivery\nWould you like detailed explanation for each phase?"
    },

    // === ุงููุณู 8: ุงูุชูุงุตู ูุงููุชุงุจุนุฉ ===
    {
        keywords: pageLang === "ar" ? ["ุงุชุตุงู", "ุชูุงุตู", "ุฑูู", "ูุงุชู", "ุจุฑูุฏ", "ููู", "ุงูุชูุงุตู", "ุงูุงูููู"] : ["contact", "how to reach", "get in touch", "phone", "email", "contact us"],
        response: pageLang === "ar" ?
            "ููููู ุงูุชูุงุตู ูุนูุง ุนุจุฑ:\n- ุงูุจุฑูุฏ: info@digital-art.website\n- ุงููุงุชู: 00905398847282\n- ุงููุงุชุณุงุจ: ููุณ ุงูุฑูู\nุฃู ูุณููุฉ ุชูุถููุงุ" :
            "You can contact us via:\n- Email: info@digital-art.website\n- Phone: 00905398847282\n- WhatsApp: same number\nWhich method do you prefer?"
    },
    {
        keywords: pageLang === "ar" ? ["ููุชุจูู", "ุงููููุน ุงูุฌุบุฑุงูู", "ุฒูุงุฑุฉ ุงูููุชุจ", "ุนููุงููู", "ุงูุนููุงู"] : ["your office", "location", "visit us", "your address", "address"],
        response: pageLang === "ar" ?
            "ููุฑูุง ุงูุฑุฆูุณู ูู ุงุณุทูุจููุ ุงูุนููุงู:\nDigital Art Company\nุดุงุฑุน ุงูุงุณุชููุงูุ ูุจูู ุฑูู 123\nูุณุชูุจู ุงูุฒูุงุฑุงุช ุจููุนุฏ ูุณุจู. ูู ุชุฑูุฏ ุชุญุฏูุฏ ููุนุฏุ" :
            "Our main office in Istanbul:\nDigital Art Company\nIstiklal Street, Building No: 123\nWe receive visits by appointment. Would you like to schedule a visit?"
    },
    {
        keywords: pageLang === "ar" ? ["ูุงุชุณุงุจ", "ุชูุงุตู ุนุจุฑ ูุงุชุณุงุจ", "ุงุฑุณุงู ูุงุชุณุงุจ"] : ["whatsapp", "contact via whatsapp", "send whatsapp"],
        response: pageLang === "ar" ?
            "ููููู ุงูุชูุงุตู ูุจุงุดุฑุฉ ุนุจุฑ ูุงุชุณุงุจ:\nhttps://wa.me/905398847282\nุณูุฌูุจ ุนูู ุงุณุชูุณุงุฑู ูู ุฃุณุฑุน ููุช!" :
            "You can contact us directly via WhatsApp:\nhttps://wa.me/905398847282\nWe'll reply to your inquiry ASAP!"
    },

    // === ุงููุณู 9: ุฎุฏูุงุช ุฅุถุงููุฉ ===
    {
        keywords: pageLang === "ar" ? ["ุงุณุชุถุงูุฉ", "SSL", "ุฃูุงู", "ุญูุงูุฉ", "ุณูุฑูุฑ"] : ["hosting", "SSL", "security", "protection", "server"],
        response: pageLang === "ar" ?
            "ูููุฑ ุญููู ุงุณุชุถุงูุฉ ูุชูุงููุฉ:\n- ุงุณุชุถุงูุฉ ูุดุชุฑูุฉ\n- ุณูุฑูุฑุงุช ุฎุงุตุฉ\n- ุดูุงุฏุงุช SSL\n- ุญูุงูุฉ ูู ุงูุงุฎุชุฑุงู\nูุง ูู ุงุญุชูุงุฌุงุชู ูู ุงูุงุณุชุถุงูุฉุ" :
            "We provide complete hosting solutions:\n- Shared hosting\n- Private servers\n- SSL certificates\n- Hack protection\nWhat are your hosting needs?"
    },
    {
        keywords: pageLang === "ar" ? ["ุงุณู ูุทุงู", "ุฏูููู", "ุดุฑุงุก ุฏูููู"] : ["domain name", "domain", "buy domain"],
        response: pageLang === "ar" ?
            "ูุณุงุนุฏู ูู ุงุฎุชูุงุฑ ูุดุฑุงุก ุงุณู ุงููุทุงู ุงูููุงุณุจ:\n- ุงูุจุญุซ ุนู ุงุณู ูุชุงุญ\n- ุงูุชุณุฌูู ููุฏุฉ ุณูุฉ ุฃู ุฃูุซุฑ\n- ุฅุฏุงุฑุฉ DNS\nูู ูุฏูู ุงุณู ูุนูู ูู ุฐูููุ" :
            "We help choose and buy perfect domain:\n- Search for available names\n- Registration for 1+ years\n- DNS management\nDo you have a specific name in mind?"
    },

    // === ุงููุณู 10: ุจุฏุก ุงููุดุฑูุน ===
    {
        keywords: pageLang === "ar" ? ["ููู ุฃุจุฏุฃ", "ุฎุฏูุฉ", "ุทูุจ ุฎุฏูุฉ", "ุงูุชุนุงูู", "ุจุฏุก ูุดุฑูุน"] : ["how to start", "request service", "collaboration", "start project"],
        response: pageLang === "ar" ?
            "ูุจุฏุก ูุดุฑูุนู:\n1. ุฃุฎุจุฑูุง ุนู ููุฑุชู\n2. ุณููุชุฑุญ ุงูุญู ุงูุฃูุซู\n3. ููุฏู ุนุฑุถ ุณุนุฑ\n4. ูุจุฏุฃ ุงูุชูููุฐ\nูู ูุฏูู ููุฑุฉ ูุดุฑูุน ุฌุงูุฒุฉุ" :
            "To start your project:\n1. Tell us about your idea\n2. We'll suggest best solution\n3. Provide a quote\n4. Begin implementation\nDo you have a project idea ready?"
    },
    {
        keywords: pageLang === "ar" ? ["ุนูุฏ ุนูู", "ุถูุงู", "ุดุฑูุท ูุฃุญูุงู", "ุณูุงุณุฉ ุงูุงุณุชุฑุฌุงุน"] : ["contract", "warranty", "terms and conditions", "refund policy"],
        response: pageLang === "ar" ?
            "ุฌููุน ูุดุงุฑูุนูุง ุชุชู ุจุนูุฏ ุฑุณูู ูุดูู:\n- ุถูุงู ููุฏุฉ ุนุงู\n- ุณูุงุณุฉ ุงุณุชุฑุฌุงุน\n- ุดุฑูุท ูุงุถุญุฉ\nููููู ุงูุงุทูุงุน ุนูู ุงููููุฐุฌ ููุง: [ุฑุงุจุท ุงูุนูุฏ]" :
            "All projects include official contract with:\n- 1 year warranty\n- Refund policy\n- Clear terms\nYou can view the template here: [contract link]"
    }
];

// ุฅูุดุงุก ุนูุงุตุฑ ูุงุฌูุฉ ุงูุฑูุจูุช ุฏููุงููููุงู
function createChatbotElements() {
    // ุงูุนูุตุฑ ุงูุฑุฆูุณู
    const chatbotContainer = document.createElement('div');
    chatbotContainer.id = 'digital-art-chatbot-container';
    chatbotContainer.className = 'digital-art-chatbot-container';

    // ุงูููุฏุฑ
    const header = document.createElement('div');
    header.className = 'digital-art-chatbot-header';
    header.innerHTML = `
        <h3 id="digital-art-chatbot-title">${pageLang === "ar" ? "ุฑูุจูุช ุงูุฏุฑุฏุดุฉ ุงูุฐูู" : "Smart Chatbot"}</h3>
        <span class="digital-art-close-btn">&times;</span>
    `;

    // ุฌุณู ุงููุญุงุฏุซุฉ
    const body = document.createElement('div');
    body.id = 'digital-art-chatbot-body';
    body.className = 'digital-art-chatbot-body';
    body.innerHTML = `
        <div class="digital-art-message digital-art-bot-message">
            <p id="digital-art-welcome-message">${pageLang === "ar"
            ? "ูุฑุญุจูุง ุจู ูู Digital Art! ููู ูููููู ูุณุงุนุฏุชู ุงููููุ"
            : "Welcome to Digital Art! How can I assist you today?"
        }</p>
        </div>
    `;

    // ุงูููุชุฑ (ุญูู ุงูุฅุฏุฎุงู)
    const footer = document.createElement('div');
    footer.className = 'digital-art-chatbot-footer';
    footer.innerHTML = `
        <input type="text" id="digital-art-messageInput" placeholder="${pageLang === "ar" ? "ุงูุชุจ ุฑุณุงูุชู ููุง..." : "Type your message here..."
        }" />
        <button id="digital-art-sendBtn"><i class="fas fa-paper-plane"></i></button>
        <button id="digital-art-whatsappBtn"><i class="fab fa-whatsapp"></i></button>
    `;

    // ุฒุฑ ุงูุชูุนูู
    const toggleBtn = document.createElement('div');
    toggleBtn.className = 'digital-art-chatbot-toggle';
    toggleBtn.innerHTML = '<i class="fa-solid fa-robot"></i>';

    // ุชุฌููุน ุงูุนูุงุตุฑ
    chatbotContainer.appendChild(header);
    chatbotContainer.appendChild(body);
    chatbotContainer.appendChild(footer);

    document.body.appendChild(chatbotContainer);
    document.body.appendChild(toggleBtn);

    // ุฅุถุงูุฉ ุนูุงุตุฑ ูุคุดุฑ ุงููุชุงุจุฉ
    const typingIndicator = document.createElement('div');
    typingIndicator.id = 'digital-art-typing-indicator';
    typingIndicator.style.display = 'none';
    typingIndicator.innerHTML = '<div class="digital-art-typing-dots"><span></span><span></span><span></span></div>';
    body.appendChild(typingIndicator);
}

// ุชููุฆุฉ ุงูุฃุญุฏุงุซ
function initChatbotEvents() {
    // ูุชุญ/ุฅุบูุงู ุงูุฑูุจูุช
    document.querySelector('.digital-art-chatbot-toggle').addEventListener('click', toggleChatbot);
    document.querySelector('.digital-art-close-btn').addEventListener('click', toggleChatbot);

    // ุฅุฑุณุงู ุงูุฑุณุงูุฉ
    document.getElementById('digital-art-sendBtn').addEventListener('click', sendMessage);

    // ุฅุฑุณุงู ุจุงูุถุบุท ุนูู Enter
    document.getElementById('digital-art-messageInput').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    // ุฒุฑ ุงููุงุชุณุงุจ
    document.getElementById('digital-art-whatsappBtn').addEventListener('click', function () {
        const whatsappUrl = pageLang === "ar"
            ? "https://wa.me/905398847282?text=ูุฑุญุจุงูุ ุฃุฑูุฏ ุงูุงุณุชูุณุงุฑ ุนู ุฎุฏูุงุชูู"
            : "https://wa.me/905398847282?text=Hello, I want to inquire about your services";
        window.open(whatsappUrl, '_blank');
    });

    // ุฅุบูุงู ุนูุฏ ุงูููุฑ ุฎุงุฑุฌ ุงูุฑูุจูุช
    document.addEventListener('click', function (event) {
        const chatbot = document.getElementById('digital-art-chatbot-container');
        const toggleBtn = document.querySelector('.digital-art-chatbot-toggle');

        if (!chatbot.contains(event.target) && !toggleBtn.contains(event.target)) {
            chatbot.classList.remove('digital-art-active');
        }
    });
}

// ุชุญุณูู ูุนุงูุฌุฉ ุงููุต ุงูุนุฑุจู
function normalizeArabic(text) {
    return text
        .replace(/[ุฃุขุฅ]/g, 'ุง')
        .replace(/[ุฉ]/g, 'ู')
        .replace(/[ู]/g, 'ู')
        .replace(/[ุคุฆ]/g, 'ุก')
        .replace(/[\u064B-\u065F\u0670]/g, '') // ุฅุฒุงูุฉ ุงูุชุดููู
        .replace(/\s+/g, ' ') // ุชูููู ุงููุณุงูุงุช ุงููุชุนุฏุฏุฉ
        .trim()
        .toLowerCase();
}

// ูุคุดุฑ ุงููุชุงุจุฉ
function showTypingIndicator() {
    const typing = document.getElementById('digital-art-typing-indicator');
    typing.style.display = 'block';
    document.getElementById('digital-art-chatbot-body').scrollTop =
        document.getElementById('digital-art-chatbot-body').scrollHeight;
}

function hideTypingIndicator() {
    document.getElementById('digital-art-typing-indicator').style.display = 'none';
}

// ุตูุช ุงูุชูุจูู
function playNotificationSound() {
    const audio = new Audio('data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU...');
    audio.play().catch(e => console.log('ูู ูุชู ุชุดุบูู ุงูุตูุช:', e));
}

// ุชูููุฉ ุงููุฏุฎูุงุช ูู XSS
function sanitizeInput(input) {
    const div = document.createElement('div');
    div.textContent = input;
    return div.innerHTML;
}

// ุงูุจุญุซ ุนู ุฑุฏ ููุงุณุจ
function findReply(message) {
    const cleanMessage = normalizeArabic(message);

    // ุงูุจุญุซ ุนู ูุงุนุฏุฉ ุชุทุงุจู ุงูุฑุณุงูุฉ
    for (const rule of rules) {
        const found = rule.keywords.some(keyword => {
            const cleanKeyword = normalizeArabic(keyword);
            return cleanMessage === cleanKeyword ||
                cleanMessage.includes(` ${cleanKeyword} `) ||
                cleanMessage.startsWith(`${cleanKeyword} `) ||
                cleanMessage.endsWith(` ${cleanKeyword}`);
        });

        if (found) {
            return rule.response;
        }
    }

    // ุงูุฑุฏ ุงูุงูุชุฑุงุถู
    return pageLang === "ar"
        ? "ูู ุฃููู ุณุคุงูู. ููุฒูุฏ ูู ุงููุนูููุงุช ุนู ุฎุฏูุงุชูุง ููููู ุงูุชูุงุตู ูุนูุง ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: info@digital-art.website ุฃู ุงูุงุชุตุงู ุจูุง ุนูู ุงูุฑูู: 00905398847282."
        : "I didn't understand your question. You can contact us via email: info@digital-art.website or call us at: 00905398847282.";
}

// ุฅุถุงูุฉ ุฑุณุงูุฉ ููุฏุฑุฏุดุฉ
function addMessage(text, sender) {
    const chatBox = document.getElementById('digital-art-chatbot-body');
    const message = document.createElement('div');
    message.className = `digital-art-message digital-art-${sender}-message`;
    message.innerHTML = `<p>${text}</p>`;
    chatBox.appendChild(message);
    chatBox.scrollTop = chatBox.scrollHeight;
}

// ุชุจุฏูู ุญุงูุฉ ุงูุฑูุจูุช (ูุชุญ/ุฅุบูุงู)
function toggleChatbot() {
    document.getElementById('digital-art-chatbot-container').classList.toggle('digital-art-active');
}

// ุฅุฑุณุงู ุงูุฑุณุงูุฉ
function sendMessage() {
    const input = document.getElementById('digital-art-messageInput');
    const message = sanitizeInput(input.value.trim());

    if (message) {
        addMessage(message, 'user');
        input.value = '';

        showTypingIndicator();

        setTimeout(() => {
            hideTypingIndicator();
            const reply = findReply(message);
            addMessage(reply, 'bot');
            playNotificationSound();
        }, 1000 + Math.random() * 2000);
    }
}

// ุชููุฆุฉ ุงูุฑูุจูุช ุนูุฏ ุชุญููู ุงูุตูุญุฉ
document.addEventListener('DOMContentLoaded', function () {
    createChatbotElements();
    initChatbotEvents();
});